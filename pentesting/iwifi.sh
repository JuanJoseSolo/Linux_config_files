#!/bin/bash
# -*- coding: utf-8 -*-
#-------------------------------------------------------------------------#
# parameters options:
# 1) interface mode: 'ON' -> puts the wifi interface into monitor mode.
#                    'OFF' -> puts the wifi interface into managed mode.
#
# Autor: Juan Jose Solorzano.
# Propose: This scritp enables or disables the monitor mode of your wifi
#          adapter.
#-------------------------------------------------------------------------#
if [ "on" == $1 ]; then 
    monitor=true
elif [ "off" == $1 ]; then
    monitor=false
fi

b_name=$(ifconfig | grep "w" | awk '{print $1}') # gets the interface name.
b_name=${b_name%:} # remove the ':' character

if [ $monitor == true ]; then
    echo "Putting $b_name adapter in a monitor mode ..."
    ifconfig $b_name down
    iwconfig $b_name mode monitor
    airmon-ng check kill 1>/dev/null
    ifconfig $b_name up
    status=$(iwconfig | grep -i "Mode")
    echo "Board status $status"
    echo "Monitor mode -> done"
else
    echo "Starting wifi normally..."
    ifconfig $b_name down
    iwconfig $b_name mode Managed
    ifconfig $b_name up
    sleep 1s
    service NetworkManager start
fi